USAGE

Перед запуском:

1. Файл с данными `РТ тарифы {currentDate}.xlsx` будет создан в папке data текущей директории. Если такой папки нет, она будет создана. Если файл с таким именем уже существует, будет создан файл `1 {oldName}`, если `1 {oldName}` уже существует, `2 {oldName}` и т.д.
2. Парсер работает на строго определённой версии браузера Chrome. При необходимости приведите в соответсвие версию вашего браузера и файл драйвера chromedriver.exe по этой ссылке https://googlechromelabs.github.io/chrome-for-testing/
3. Если нужны данные только с кластера регионов, в файле app.ts в переменную clusterNames добавьте массив нужных кластеров, которые указаны в том же файле.
   Списки регионов находятся в классе ClusterService в файле services/cluster/cluster-service.ts, названия кластеров указаны в clusterNamesEnum в файле services/models/cluster.ts
4. Файлы логов при каждом запуске очищаются.
5. Если нужно спарсить только города для регионов, раскомментируйте строку с `new RootStage(citiesOnlyConfig).go()` и закомментируйте запуск других `RootStage`.
6. Перед первым запуском не забудьте `npm i`

Запуск: `npm start`

Во время работы:

1. Сбор данных идёт с трёх страниц, path которых указан в wayConfig. Для каждой страницы велётся свой .log файл в папке logs.
2. Данные заносятся в таблицу в момент появления такого уведомления в логах: `сбор данных в {cityName} завершён...` - сразу все тарифы текущей страницы.
3. В логах терминала может появиться ошибка, содержащая примерно примерно такой текст `...USB: usb_device_handle_win.cc:1046 Failed to read descriptor from node connection:...`
   или `12848:1004:1129/194313.791:ERROR:ssl_client_socket_impl.cc(975) handshake failed; returned -1, SSL error code 1, net_error -100`, или `[21636:21284:1007/201909.917:ERROR:google_apis\gcm\engine\registration_request.cc:291] Registration response error message: DEPRECATED_ENDPOINT`, или типа того.

   Не обращайте внимания, это не нарушает работу парсера.

4. Внимание!
   Нелья сворачивать окно, в котором работает парсер, это приведёт к ошибке. Можно переключаться на другие окна, приложения, рабочие столы вашего устройства.
5. Внимание!
   Если во время работы парсера ваше устройство перейдёт в спящий режим, работа парсера будет нарушена: он зациклится на перезапуске или прекратит работу. Однако, переход экрана в спящий режим вполне допустим.
6. Внимание!
   Не открывайте файл .xlsx, в который записываются данные, если он будет открыт в момент сохранения данных, это приведёт к ошибке.
7. Парсер в случае ошибки может закрыть и снова открыть окно браузера, в котором работает. Это означает, что для текущего города этой страницы сбор данных пойдёт заново.
8. Если в одном из окон браузера сбор данных "завис" (бесконечное ожидание загрузки контента или сетевая неисправность), закройте это окно для инициации перезапуска.
9. Если после ошибки парсер не восстановил работу сам, посмотрите в логах от каждой страницы, сбор данных для которой незавершён, номер региона и номер последнего города. В файле app.ts в запуске функций .go() для каждой страницы, парсинг которой не завершён, укажите эти номера соответственно. Например:
   `new RootStage(mainWayConfig).go(24, 3) --> (регион, город) \n
new RootStage(internetWayConfig).go(50, 22)`
   В таком случае запуск парсера для ненужной страницы (в примере выше это будет `new RootStage(ranchoWayConfig).go()`) надо закомментировать
